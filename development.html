<!doctype html> <meta charset=utf-8 > <title>MyDiary</title> <meta name=description  content=MyDiary > <meta name=theme-color  content="#ffffff"> <meta name=viewport  content="width=device-width, initial-scale=1"> <link href="/manifest.webmanifest" rel=manifest > <link href="/icons/maskable_icon_x192.png" rel=icon > <link href="/icons/maskable_icon_x192.png" rel=apple-touch-icon > <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel=stylesheet > <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1/font/bootstrap-icons.min.css" rel=stylesheet > <link href="/static/styles/base.css" rel=stylesheet > <link href="/static/styles/themes/base.css" rel=stylesheet > <body class=base-theme > <script> matchMedia("(prefers-color-scheme: dark)").onchange = event => { document.querySelector("body").classList.add(event.matches ? "dark" : ""); }; if (matchMedia("(prefers-color-scheme: dark)").matches) { document.querySelector("body").classList.add("dark"); }; window.addEventListener('load', () => navigator.serviceWorker.register('/sw.js')); </script> <header class="navbar navbar-expand-lg mb-3"> <div class="container navbar-inner"> <a class=navbar-brand >MyDiary</a> <a class=navbar-toggler  data-bs-target="#navbarSupportedContent" data-bs-toggle=collapse  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </a> <div class="collapse navbar-collapse" id=navbarSupportedContent > <ul class="navbar-nav mb-2 mb-lg-0"> <li class=nav-item > <a class=nav-link  href="#dashboard">Главная страница</a> <li class=nav-item > <a class=nav-link  href="#search">Поиск</a> <li class=nav-item > <a class=nav-link  href="#other">Другое</a> </ul> </div> </div> </header> <div class="container development-page"> <h1>Разработчикам</h1> <p>Стандарт хранения данных базы данных MyDiary 4 версии.</p> <p>Данные хранятся в Indexed Database. Indexed Database - это база данных в браузере позволяющие хранить сложные объекты. Эта база данных работает асинхронно, т.е. операции с ней не блокируют сайт.</p> <p>Тегами на этом сайте являются слово (последовательность не пробельных символов, отделённая от других пробельным символом), которая начинается с <code>#</code> и имеет длину больше 1.</p> <h4>Базовая структура записи</h4> <p>Запись представляет собой объект. Поля, не начинающиеся с <code>$</code>, определяются описанием типа записи, те которые начинаются с <code>$</code> являются зарезервированными.</p> <table class=table > <thead> <tr> <th>Имя поля <th>Тип <th>Описание <tr> <td><code>$id</code> <td><code>number</code> <td>ID записи, Unix-время создания записи <tr> <td><code>$type</code> <td><code>string</code> <td>UUID 1 типа записи <tr> <td><code>$tags</code> <td><code>Array&lt;string&gt;</code> <td>теги без <code>#</code> <tr> <td><code>$date</code> <td><code>string</code> <td>дата записи (не дата создания или изменения) в формате YYYY-MM-DD <tr> <td><code>$time</code> <td><code>string</code> <td>время записи (не время создания или изменения) в формате hh:mm <tr> <td><code>$created</code> <td><code>number</code> <td>Unix-время создания записи <tr> <td><code>$changed</code> <td><code>number</code> <td>Unix-время последнего изменения записи </table> <h4>Структура типа записи</h4> <table class=table > <thead> <tr> <th>Имя поля <th>Тип <th>Описание <tr> <td><code>uuid</code> <td><code>string</code> <td>UUID 1 типа записи, используется как ID, один UUID — один тип записи, добавление типа с тем же UUID — обновление этого же типа <tr> <td><code>title</code> <td><code>string</code> <td>человеческое название типа на русском языке <tr> <td><code>description</code> <td><code>string</code> <td>человеческое описание типа на русском языке <tr> <td><code>icon</code> <td><code>string</code> <td>название значка типа записи в https://icons.getbootstrap.com/ <tr> <td><code>template</code> <td><code>string</code> <td>html vue шаблон, который используется для отображения предварительного просмотра заметки <tr> <td><code>form_template</code> <td><code>string</code> <td>html vue шаблон, для модального окна, в котором происходит присмотр и изменение всей информации о заметке <tr> <td><code>fields</code> <td><code>object</code> <td>настройки дополнительных полей типа записи, представляет собой объект в котором ключ - имя поля, а значения настройки поля <tr> <td><code>page</code> <td><code>object</code> <td>настройки страницы типа записи </table> <h4>Настройки дополнительного поля типа записи</h4> <table class=table > <thead> <tr> <th>Имя поля <th>Тип <th>Описание <tr> <td><code>tags</code> <td><code>boolean</code> <td>нужно ли это поле использовать при создании списка тегов, если <code>true</code> поле должно быть string <tr> <td><code>search</code> <td><code>boolean</code> <td>нужно ли это поле использовать при поиске, если <code>true</code> поле должно быть string <tr> <td><code>require</code> <td><code>boolean</code> <td>является ли поле обязательным <tr> <td><code>default</code> <td><code>any</code> <td>значение поле по умолчанию, должно конвертироваться из js в JSON, <code>""</code>, <code>null</code> и <code>undefined</code> не считаются как заполненное поле. </table> <h4>Настройки страницы типа записи</h4> <table class=table > <thead> <tr> <th>Имя поля <th>Тип <th>Описание <tr> <td><code>title</code> <td><code>string</code> <td>Человеческое название страницы типа записи на русском языке <tr> <td><code>template</code> <td><code>string</code> <td>html vue шаблон страницы типа записи </table> <h4>Структура файла экспорта / импорта</h4> <table class=table > <thead> <tr> <th>Имя поля <th>Тип <th>Описание <tr> <td><code>version</code> <td><code>string</code> <td>версия формата (одно натуральное число) <tr> <td><code>records</code> <td><code>Array&lt;object&gt;</code> <td>записи <tr> <td><code>types</code> <td><code>Array&lt;object&gt;</code> <td>типы записи </table> </div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" defer></script>